<style>
  .topnav { margin:12px 0 18px 0; background:#0f172a; color:#e5e7eb; border-radius:10px; border:1px solid #0b1220; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
  .topnav .inner { display:flex; align-items:center; gap:14px; padding:10px 12px; position:relative; }
  .topnav a { color:#e5e7eb; text-decoration:none; font-size:14px; }
  .topnav .brand { font-weight:600; padding:6px 10px; border-radius:6px; background:#0b1220; border:1px solid rgba(255,255,255,0.06); }
  .menu { display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
  .menu-item { position:relative; }
  .menu-item > a { display:inline-block; padding:6px 10px; border-radius:6px; }
  .menu-item > a:hover { background:#1f2a44; }
  .submenu { display:none; position:absolute; top:100%; left:0; min-width:200px; background:#0f172a; border:1px solid #0b1220; border-radius:8px; padding:6px; box-shadow:0 8px 24px rgba(0,0,0,0.25); z-index:50; }
  .submenu a { display:block; padding:8px 10px; border-radius:6px; color:#e5e7eb; }
  .submenu a:hover { background:#1f2a44; }
  .menu-item.has-sub:hover .submenu { display:block; }
  .spacer { flex:1; }
  .logout { background:#ef4444; color:#fff; border:none; border-radius:6px; padding:6px 10px; cursor:pointer; }
  .debug-link { background:#f97316; color:#fff; border-radius:6px; padding:6px 14px; font-weight:600; letter-spacing:0.05em; }
  .debug-link:hover { background:#ea580c; color:#fff; }
  
  /* Mobile hamburger menu */
  .mobile-menu-toggle { display:none; background:none; border:none; color:#e5e7eb; font-size:24px; cursor:pointer; padding:4px 8px; }
  .mobile-menu-overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:100; }
  .mobile-menu { display:none; position:fixed; top:0; left:0; width:280px; max-width:85vw; height:100%; background:#0f172a; z-index:101; overflow-y:auto; padding:20px; box-shadow:2px 0 10px rgba(0,0,0,0.3); }
  .mobile-menu.active { display:block; }
  .mobile-menu-overlay.active { display:block; }
  .mobile-menu-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; padding-bottom:16px; border-bottom:1px solid rgba(255,255,255,0.1); }
  .mobile-menu-close { background:none; border:none; color:#e5e7eb; font-size:28px; cursor:pointer; padding:0; }
  .mobile-menu-item { margin-bottom:8px; }
  .mobile-menu-item > a { display:block; padding:10px 12px; border-radius:6px; color:#e5e7eb; }
  .mobile-menu-item > a:hover { background:#1f2a44; }
  .mobile-submenu { display:none; margin-left:12px; margin-top:4px; }
  .mobile-submenu.active { display:block; }
  .mobile-submenu a { display:block; padding:8px 12px; border-radius:6px; color:#9ca3af; font-size:13px; }
  .mobile-submenu a:hover { background:#1f2a44; color:#e5e7eb; }
  .mobile-menu-toggle-btn { background:none; border:none; color:#e5e7eb; padding:4px 8px; cursor:pointer; font-size:18px; }
  
  @media (max-width: 900px){
    .menu { display:none; }
    .mobile-menu-toggle { display:block; }
    .spacer { display:none; }
    .logout { margin-left:auto; }
  }
</style>
<nav class="topnav">
  <div class="inner">
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Menu">â˜°</button>
    <a class="brand" href="/dashboard">{{ t(request, 'nav.brand') }}</a>
    <div class="menu">
      <div class="menu-item">
        <a href="/ig/debug/env" class="debug-link" title="{{ t(request, 'nav.debug_env') }}">DEBUG</a>
      </div>
      <div class="menu-item has-sub">
        <a href="#">{{ t(request, 'nav.data') }}</a>
        <div class="submenu">
          <a href="/clients/table">{{ t(request, 'nav.clients') }}</a>
          <a href="/items/table">{{ t(request, 'nav.items') }}</a>
          <a href="/products/table">{{ t(request, 'nav.products') }}</a>
          <a href="/size-charts/table">Beden Tablolari</a>
          <a href="/size-charts/assign">Urun Beden Tablolari</a>
          <a href="/inventory/table">{{ t(request, 'nav.inventory') }}</a>
          <a href="/inventory/movements/table">{{ t(request, 'nav.movements') }}</a>
          <a href="/inventory/movements/missing-cost">Maliyetsiz Stok</a>
        </div>
      </div>
      <div class="menu-item has-sub">
        <a href="#">{{ t(request, 'nav.sales') }}</a>
        <div class="submenu">
          <a href="/magaza-satis">{{ t(request, 'nav.magaza_satis') }}</a>
          <a href="/orders/table">{{ t(request, 'nav.orders') }}</a>
          <a href="/orders/problem">âš ï¸ Sorunlu SipariÅŸler</a>
          <a href="/orders/partial-payments">ğŸ’° KÄ±smi Ã–demeler</a>
          <a href="/orders/duplicates">ğŸ” Potansiyel Ã‡iftler</a>
          <a href="/payments/table">{{ t(request, 'nav.payments') }}</a>
        </div>
      </div>
      <div class="menu-item has-sub">
        <a href="#">{{ t(request, 'nav.instagram') }}</a>
        <div class="submenu" style="min-width: 240px;">
          <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 4px;">Inbox</div>
          <a href="/ig/inbox">{{ t(request, 'nav.inbox') }}</a>
          <a href="/ig/inbox/admin-messages">ğŸ“¢ Admin MesajlarÄ±</a>
          <a href="/ig/inbox?has_ad=yes">Inbox Â· ReklamlÄ±</a>
          <a href="/ig/inbox?has_ad=unlinked">Inbox Â· ReklamÄ± ÃœrÃ¼ne BaÄŸla</a>
          <a href="/ig/inbox/ai-replied">ğŸ¤– AI Cevaplanan Mesajlar</a>
          <a href="/ig/inbox/ai-queue">ğŸ“‹ AI KuyruÄŸu (Bekleyen)</a>
          <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">Ä°Ã§erik & Analiz</div>
          <a href="/ig/content/calendar">ğŸ“… Ä°Ã§erik Takvimi</a>
          <a href="/ig/insights/dashboard">ğŸ“Š Insights Panel</a>
          <a href="/ig/comments/moderation">ğŸ’¬ Yorum Moderasyonu</a>
          <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">BaÄŸlantÄ±lar</div>
          <a href="/posts/unlinked">GÃ¶nderileri ÃœrÃ¼ne BaÄŸla</a>
          <a href="/ads/auto-linked">ğŸ¤– Otomatik BaÄŸlanan Reklamlar</a>
          <a href="/posts/auto-linked">ğŸ¤– Otomatik BaÄŸlanan GÃ¶nderiler</a>
          <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">Test & Debug</div>
          <a href="/ig/mock-tester">ğŸ§ª Mock Conversation Tester</a>
        </div>
      </div>
      <div class="menu-item has-sub">
        <a href="#">ğŸ¤– AI</a>
        <div class="submenu" style="min-width: 240px;">
          <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 4px;">AI Cevaplama</div>
          <a href="/ig/ai/process">{{ t(request, 'nav.ai_processing') }}</a>
          <a href="/ig/ai/shadow/monitor">{{ t(request, 'nav.ai_shadow_monitor') }}</a>
          <a href="/ig/ai/settings">âš™ï¸ AI Cevap AyarlarÄ±</a>
          <a href="/ig/ai/pretexts">AI Pretext YÃ¶netimi</a>
          <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">AI SipariÅŸler</div>
          <a href="/ai/orders">{{ t(request, 'nav.ai_orders') }}</a>
          <a href="/ai/orders/detect">ğŸ” SipariÅŸ Tespiti (Tarih AralÄ±ÄŸÄ±)</a>
          <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">ÃœrÃ¼n & Q&A</div>
          <a href="/ig/ai/products/reviews">ğŸ“Š ÃœrÃ¼n AI Ä°ncelemeleri</a>
          <a href="/products/qas/table">ğŸ” Q&A YÃ¶netimi (TÃ¼m ÃœrÃ¼nler)</a>
          <a href="/products/table">ğŸ“ ÃœrÃ¼nler (Q&A eklemek iÃ§in)</a>
          <a href="/products/upsells">ğŸ›’ Upsell YÃ¶netimi</a>
          <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">BaÄŸlantÄ± & Analiz</div>
          <a href="/ig/ai/unlinked">{{ t(request, 'nav.unlinked_purchases') }}</a>
          <a href="/ig/ai/link-suggest">{{ t(request, 'nav.link_conversation') }}</a>
        </div>
      </div>
      <div class="menu-item has-sub">
        <a href="#">{{ t(request, 'nav.import') }}</a>
        <div class="submenu">
          <a href="/mappings/table">{{ t(request, 'nav.mapping') }}</a>
          <a href="/import/map?source=bizim&filename=last">{{ t(request, 'nav.mapping_wizard') }}</a>
          <a href="/reconcile/returns">{{ t(request, 'nav.returns_reconcile') }}</a>
          <a href="/reconcile/payments">ğŸ’° Ã–deme DÃ¼zeltme</a>
          <a href="/import/uploads">ğŸ“‚ Excel UploadlarÄ±</a>
          <a href="/excel-tracker">ğŸ“Š Excel DosyasÄ± Takibi</a>
          <a href="/import/dedupe/kargo">ğŸšš Kargo Ã‡ift SatÄ±r DÃ¼zeltme</a>
          <a href="/import/ambiguous">âš ï¸ Ambiguous Importlar</a>
          <a href="/import/map-debug">ğŸ§­ Mapping Debug</a>
          <a href="/admin/data-integrity">ğŸ›¡ï¸ Veri Butunlugu</a>
        </div>
      </div>
      <div class="menu-item has-sub">
        <a href="#">{{ t(request, 'nav.reports') }}</a>
        <div class="submenu">
          <a href="/reports/daily">{{ t(request, 'nav.daily') }}</a>
          <a href="/costs">{{ t(request, 'nav.costs') }}</a>
        </div>
      </div>
      <div class="menu-item has-sub">
        <a href="#">ğŸ’° Finans</a>
        <div class="submenu">
          <a href="/accounts/table">Hesaplar</a>
          <a href="/accounts/table#transfer">Virman</a>
          <a href="/income/table">Gelir GiriÅŸi</a>
          <a href="/costs">Giderler</a>
          <a href="/suppliers">Cari Hesaplar</a>
          <a href="/reports/finance">Finans Raporu</a>
          <a href="/settings/finance">âš™ï¸ {{ t(request, 'settings.finance_title') }}</a>
        </div>
      </div>
      <div class="menu-item has-sub">
        <a href="#">{{ t(request, 'nav.admin') }}</a>
        <div class="submenu">
          <a href="/noc">{{ t(request, 'nav.noc') }}</a>
          <a href="/admin/status">{{ t(request, 'nav.system_status') }}</a>
          <a href="/admin/health">{{ t(request, 'nav.health_json') }}</a>
          <a href="/admin/version">{{ t(request, 'nav.version_json') }}</a>
          <a href="/admin/shipping-companies">ğŸšš Kargo FirmalarÄ± & Fiyatlar</a>
          <a href="/admin/fix/message-timestamps">{{ t(request, 'nav.fix_message_ts') }}</a>
          <a href="/admin/debug/jobs?kind=ingest">{{ t(request, 'nav.jobs_ingest') }}</a>
          <a href="/admin/debug/attachments">{{ t(request, 'nav.attachments_json') }}</a>
          <a href="/admin/debug/conversations">{{ t(request, 'nav.conversations_json') }}</a>
          <a href="/soap-test">ğŸ“¦ SOAP Test (Surat Kargo)</a>
          <a href="#" id="invalidateCacheLink">{{ t(request, 'nav.cache_invalidate') }}</a>
        </div>
      </div>
      <div class="menu-item has-sub">
        <a href="#">{{ t(request, 'nav.legal') }}</a>
        <div class="submenu">
          <a href="/privacy">{{ t(request, 'nav.privacy') }}</a>
          <a href="/terms">{{ t(request, 'nav.terms') }}</a>
          <a href="/data_deletion">{{ t(request, 'nav.data_deletion') }}</a>
        </div>
      </div>
      <div class="menu-item has-sub">
        <a href="#">{{ t(request, 'nav.language') }}</a>
        <div class="submenu">
          <a href="#" onclick="return setLang('tr')">{{ t(request, 'lang.turkish') }}</a>
          <a href="#" onclick="return setLang('en')">{{ t(request, 'lang.english') }}</a>
        </div>
      </div>
    </div>
    <div class="spacer"></div>
    <button id="logoutBtn" class="logout" type="button">{{ t(request, 'nav.logout') }}</button>
  </div>
  
</nav>
<script>
  (function(){
    const MSG_LOGOUT_ERROR = "{{ t(request, 'nav.logout_error') }}";
    const MSG_CACHE_CLEARED = "{{ t(request, 'nav.cache_cleared') }}";
    const MSG_CLEAR_ERROR = "{{ t(request, 'nav.clear_error') }}";
    const btn = document.getElementById('logoutBtn');
    if (btn) {
      btn.addEventListener('click', async ()=>{
        try { await fetch('/auth/logout', { method: 'POST' }); location.href = '/auth/login'; } catch(e){ alert('Ã‡Ä±kÄ±ÅŸ hatasÄ±'); }
      });
    }
    const inv = document.getElementById('invalidateCacheLink');
    if (inv) {
      inv.addEventListener('click', async (e)=>{
        e.preventDefault();
        try {
          const res = await fetch('/admin/cache/invalidate', { method: 'POST' });
          let msg = MSG_CACHE_CLEARED;
          try { const j = await res.json(); if (!res.ok) msg = (j && (j.detail||j.error)) ? (MSG_CLEAR_ERROR + ': ' + (j.detail||j.error)) : (MSG_CLEAR_ERROR + ': ' + res.status); } catch(_e) {}
          alert(msg);
        } catch(e){ alert(MSG_CLEAR_ERROR); }
      });
    }
    window.setLang = async function(lang){
      try {
        const res = await fetch('/i18n/set', {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body: new URLSearchParams({ lang })
        });
        // Always reload to reflect new language
        location.reload();
      } catch(e){
        // ignore
      }
      return false;
    }
  })();
  
  // Mobile menu functionality
  function toggleMobileMenu() {
    const overlay = document.getElementById('mobileMenuOverlay');
    const menu = document.getElementById('mobileMenu');
    overlay.classList.toggle('active');
    menu.classList.toggle('active');
    document.body.style.overflow = menu.classList.contains('active') ? 'hidden' : '';
  }
  
  function closeMobileMenu() {
    const overlay = document.getElementById('mobileMenuOverlay');
    const menu = document.getElementById('mobileMenu');
    overlay.classList.remove('active');
    menu.classList.remove('active');
    document.body.style.overflow = '';
  }
  
  function toggleMobileSubmenu(element) {
    const submenu = element.nextElementSibling;
    if (submenu && submenu.classList.contains('mobile-submenu')) {
      submenu.classList.toggle('active');
    }
  }
  
  // Close mobile menu when clicking overlay
  document.addEventListener('DOMContentLoaded', function() {
    const overlay = document.getElementById('mobileMenuOverlay');
    if (overlay) {
      overlay.addEventListener('click', closeMobileMenu);
    }
  });
</script>

<!-- Mobile Menu Overlay -->
<div id="mobileMenuOverlay" class="mobile-menu-overlay"></div>

<!-- Mobile Menu -->
<div id="mobileMenu" class="mobile-menu">
  <div class="mobile-menu-header">
    <a class="brand" href="/dashboard" onclick="closeMobileMenu()">{{ t(request, 'nav.brand') }}</a>
    <button class="mobile-menu-close" onclick="closeMobileMenu()">&times;</button>
  </div>
  
  <div class="mobile-menu-item">
    <a href="/ig/debug/env" class="debug-link" onclick="closeMobileMenu()">DEBUG</a>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">{{ t(request, 'nav.data') }}</a>
    <div class="mobile-submenu">
      <a href="/clients/table" onclick="closeMobileMenu()">{{ t(request, 'nav.clients') }}</a>
      <a href="/items/table" onclick="closeMobileMenu()">{{ t(request, 'nav.items') }}</a>
      <a href="/products/table" onclick="closeMobileMenu()">{{ t(request, 'nav.products') }}</a>
      <a href="/size-charts/table" onclick="closeMobileMenu()">Beden Tablolari</a>
      <a href="/size-charts/assign" onclick="closeMobileMenu()">Urun Beden Tablolari</a>
      <a href="/inventory/table" onclick="closeMobileMenu()">{{ t(request, 'nav.inventory') }}</a>
      <a href="/inventory/movements/table" onclick="closeMobileMenu()">{{ t(request, 'nav.movements') }}</a>
    </div>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">{{ t(request, 'nav.sales') }}</a>
    <div class="mobile-submenu">
      <a href="/magaza-satis" onclick="closeMobileMenu()">{{ t(request, 'nav.magaza_satis') }}</a>
      <a href="/orders/table" onclick="closeMobileMenu()">{{ t(request, 'nav.orders') }}</a>
      <a href="/orders/problem" onclick="closeMobileMenu()">âš ï¸ Sorunlu SipariÅŸler</a>
      <a href="/orders/partial-payments" onclick="closeMobileMenu()">ğŸ’° KÄ±smi Ã–demeler</a>
      <a href="/orders/duplicates" onclick="closeMobileMenu()">ğŸ” Potansiyel Ã‡iftler</a>
      <a href="/payments/table" onclick="closeMobileMenu()">{{ t(request, 'nav.payments') }}</a>
    </div>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">{{ t(request, 'nav.instagram') }}</a>
    <div class="mobile-submenu">
      <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 4px;">Inbox</div>
      <a href="/ig/inbox" onclick="closeMobileMenu()">{{ t(request, 'nav.inbox') }}</a>
      <a href="/ig/inbox/admin-messages" onclick="closeMobileMenu()">ğŸ“¢ Admin MesajlarÄ±</a>
      <a href="/ig/inbox?has_ad=yes" onclick="closeMobileMenu()">Inbox Â· ReklamlÄ±</a>
      <a href="/ig/inbox?has_ad=unlinked" onclick="closeMobileMenu()">Inbox Â· ReklamÄ± ÃœrÃ¼ne BaÄŸla</a>
      <a href="/ig/inbox/ai-replied" onclick="closeMobileMenu()">ğŸ¤– AI Cevaplanan Mesajlar</a>
      <a href="/ig/inbox/ai-queue" onclick="closeMobileMenu()">ğŸ“‹ AI KuyruÄŸu (Bekleyen)</a>
      <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">Ä°Ã§erik & Analiz</div>
      <a href="/ig/content/calendar" onclick="closeMobileMenu()">ğŸ“… Ä°Ã§erik Takvimi</a>
      <a href="/ig/insights/dashboard" onclick="closeMobileMenu()">ğŸ“Š Insights Panel</a>
      <a href="/ig/comments/moderation" onclick="closeMobileMenu()">ğŸ’¬ Yorum Moderasyonu</a>
      <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">BaÄŸlantÄ±lar</div>
      <a href="/posts/unlinked" onclick="closeMobileMenu()">GÃ¶nderileri ÃœrÃ¼ne BaÄŸla</a>
      <a href="/ads/auto-linked" onclick="closeMobileMenu()">ğŸ¤– Otomatik BaÄŸlanan Reklamlar</a>
      <a href="/posts/auto-linked" onclick="closeMobileMenu()">ğŸ¤– Otomatik BaÄŸlanan GÃ¶nderiler</a>
      <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">Test & Debug</div>
      <a href="/ig/mock-tester" onclick="closeMobileMenu()">ğŸ§ª Mock Conversation Tester</a>
    </div>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">ğŸ¤– AI</a>
    <div class="mobile-submenu">
      <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 4px;">AI Cevaplama</div>
      <a href="/ig/ai/process" onclick="closeMobileMenu()">{{ t(request, 'nav.ai_processing') }}</a>
      <a href="/ig/ai/shadow/monitor" onclick="closeMobileMenu()">{{ t(request, 'nav.ai_shadow_monitor') }}</a>
      <a href="/ig/ai/settings" onclick="closeMobileMenu()">âš™ï¸ AI Cevap AyarlarÄ±</a>
      <a href="/ig/ai/pretexts" onclick="closeMobileMenu()">AI Pretext YÃ¶netimi</a>
      <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">AI SipariÅŸler</div>
      <a href="/ai/orders" onclick="closeMobileMenu()">{{ t(request, 'nav.ai_orders') }}</a>
      <a href="/ai/orders/detect" onclick="closeMobileMenu()">ğŸ” SipariÅŸ Tespiti (Tarih AralÄ±ÄŸÄ±)</a>
      <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">ÃœrÃ¼n & Q&A</div>
      <a href="/ig/ai/products/reviews" onclick="closeMobileMenu()">ğŸ“Š ÃœrÃ¼n AI Ä°ncelemeleri</a>
      <a href="/products/qas/table" onclick="closeMobileMenu()">ğŸ” Q&A YÃ¶netimi (TÃ¼m ÃœrÃ¼nler)</a>
      <a href="/products/table" onclick="closeMobileMenu()">ğŸ“ ÃœrÃ¼nler (Q&A eklemek iÃ§in)</a>
      <a href="/products/upsells" onclick="closeMobileMenu()">ğŸ›’ Upsell YÃ¶netimi</a>
      <div style="padding: 4px 8px; font-size: 11px; color: #9ca3af; text-transform: uppercase; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); margin: 8px 0 4px 0;">BaÄŸlantÄ± & Analiz</div>
      <a href="/ig/ai/unlinked" onclick="closeMobileMenu()">{{ t(request, 'nav.unlinked_purchases') }}</a>
      <a href="/ig/ai/link-suggest" onclick="closeMobileMenu()">{{ t(request, 'nav.link_conversation') }}</a>
    </div>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">{{ t(request, 'nav.import') }}</a>
    <div class="mobile-submenu">
      <a href="/mappings/table" onclick="closeMobileMenu()">{{ t(request, 'nav.mapping') }}</a>
      <a href="/import/map?source=bizim&filename=last" onclick="closeMobileMenu()">{{ t(request, 'nav.mapping_wizard') }}</a>
      <a href="/reconcile/returns" onclick="closeMobileMenu()">{{ t(request, 'nav.returns_reconcile') }}</a>
      <a href="/reconcile/payments" onclick="closeMobileMenu()">ğŸ’° Ã–deme DÃ¼zeltme</a>
      <a href="/import/uploads" onclick="closeMobileMenu()">ğŸ“‚ Excel UploadlarÄ±</a>
      <a href="/excel-tracker" onclick="closeMobileMenu()">ğŸ“Š Excel DosyasÄ± Takibi</a>
      <a href="/import/ambiguous" onclick="closeMobileMenu()">âš ï¸ Ambiguous Importlar</a>
      <a href="/import/map-debug" onclick="closeMobileMenu()">ğŸ§­ Mapping Debug</a>
      <a href="/admin/data-integrity" onclick="closeMobileMenu()">ğŸ›¡ï¸ Veri Butunlugu</a>
    </div>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">{{ t(request, 'nav.reports') }}</a>
    <div class="mobile-submenu">
      <a href="/reports/daily" onclick="closeMobileMenu()">{{ t(request, 'nav.daily') }}</a>
      <a href="/costs" onclick="closeMobileMenu()">{{ t(request, 'nav.costs') }}</a>
    </div>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">ğŸ’° Finans</a>
    <div class="mobile-submenu">
      <a href="/accounts/table" onclick="closeMobileMenu()">Hesaplar</a>
      <a href="/accounts/table#transfer" onclick="closeMobileMenu()">Virman</a>
      <a href="/income/table" onclick="closeMobileMenu()">Gelir GiriÅŸi</a>
      <a href="/costs" onclick="closeMobileMenu()">Giderler</a>
      <a href="/suppliers" onclick="closeMobileMenu()">Cari Hesaplar</a>
      <a href="/reports/finance" onclick="closeMobileMenu()">Finans Raporu</a>
    </div>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">{{ t(request, 'nav.admin') }}</a>
    <div class="mobile-submenu">
      <a href="/noc" onclick="closeMobileMenu()">{{ t(request, 'nav.noc') }}</a>
      <a href="/admin/status" onclick="closeMobileMenu()">{{ t(request, 'nav.system_status') }}</a>
      <a href="/admin/health" onclick="closeMobileMenu()">{{ t(request, 'nav.health_json') }}</a>
      <a href="/admin/version" onclick="closeMobileMenu()">{{ t(request, 'nav.version_json') }}</a>
      <a href="/admin/shipping-companies" onclick="closeMobileMenu()">ğŸšš Kargo FirmalarÄ± & Fiyatlar</a>
      <a href="/admin/fix/message-timestamps" onclick="closeMobileMenu()">{{ t(request, 'nav.fix_message_ts') }}</a>
      <a href="/admin/debug/jobs?kind=ingest" onclick="closeMobileMenu()">{{ t(request, 'nav.jobs_ingest') }}</a>
      <a href="/admin/debug/attachments" onclick="closeMobileMenu()">{{ t(request, 'nav.attachments_json') }}</a>
      <a href="/admin/debug/conversations" onclick="closeMobileMenu()">{{ t(request, 'nav.conversations_json') }}</a>
      <a href="/soap-test" onclick="closeMobileMenu()">ğŸ“¦ SOAP Test (Surat Kargo)</a>
      <a href="#" id="mobileInvalidateCacheLink" onclick="closeMobileMenu()">{{ t(request, 'nav.cache_invalidate') }}</a>
    </div>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">{{ t(request, 'nav.legal') }}</a>
    <div class="mobile-submenu">
      <a href="/privacy" onclick="closeMobileMenu()">{{ t(request, 'nav.privacy') }}</a>
      <a href="/terms" onclick="closeMobileMenu()">{{ t(request, 'nav.terms') }}</a>
      <a href="/data_deletion" onclick="closeMobileMenu()">{{ t(request, 'nav.data_deletion') }}</a>
    </div>
  </div>
  
  <div class="mobile-menu-item">
    <a href="#" onclick="toggleMobileSubmenu(this); return false;">{{ t(request, 'nav.language') }}</a>
    <div class="mobile-submenu">
      <a href="#" onclick="setLang('tr'); closeMobileMenu(); return false;">{{ t(request, 'lang.turkish') }}</a>
      <a href="#" onclick="setLang('en'); closeMobileMenu(); return false;">{{ t(request, 'lang.english') }}</a>
    </div>
  </div>
  
  <div class="mobile-menu-item" style="margin-top:20px; padding-top:20px; border-top:1px solid rgba(255,255,255,0.1);">
    <button id="mobileLogoutBtn" class="logout" type="button" style="width:100%;" onclick="closeMobileMenu()">{{ t(request, 'nav.logout') }}</button>
  </div>
</div>

<script>
  // Mobile logout handler
  document.addEventListener('DOMContentLoaded', function() {
    const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');
    if (mobileLogoutBtn) {
      mobileLogoutBtn.addEventListener('click', async function() {
        try { 
          await fetch('/auth/logout', { method: 'POST' }); 
          location.href = '/auth/login'; 
        } catch(e){ 
          alert('Ã‡Ä±kÄ±ÅŸ hatasÄ±'); 
        }
      });
    }
    
    const mobileInvalidateCacheLink = document.getElementById('mobileInvalidateCacheLink');
    if (mobileInvalidateCacheLink) {
      mobileInvalidateCacheLink.addEventListener('click', async function(e) {
        e.preventDefault();
        try {
          const res = await fetch('/admin/cache/invalidate', { method: 'POST' });
          let msg = "{{ t(request, 'nav.cache_cleared') }}";
          try { 
            const j = await res.json(); 
            if (!res.ok) msg = "{{ t(request, 'nav.clear_error') }}" + ': ' + (j && (j.detail||j.error) ? (j.detail||j.error) : res.status); 
          } catch(_e) {}
          alert(msg);
        } catch(e){ 
          alert("{{ t(request, 'nav.clear_error') }}"); 
        }
      });
    }
  });
</script>


