<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sistem Durumu</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
      .ok { color: #16a34a; }
      .bad { color: #dc2626; }
      .card { border:1px solid #e5e7eb; border-radius:8px; padding:16px; margin:12px 0; }
      code { background:#f3f4f6; padding:2px 4px; border-radius:4px; }
    </style>
  </head>
  <body>
    {% include "_nav.html" %}
    <h2>Sistem Durumu</h2>
    <div class="card">
      <div>Sürüm: <code>{{ version }}</code></div>
    </div>
    <div class="card">
      <div>Veritabanı: {% if db.ok %}<span class="ok">TAMAM</span>{% else %}<span class="bad">KAPALI</span>{% endif %}</div>
      {% if db.counts %}
        <ul>
          <li>mesaj: {{ db.counts.get('message') }}</li>
          <li>ekler: {{ db.counts.get('attachments') }}</li>
          <li>ham_olaylar: {{ db.counts.get('raw_events') }}</li>
          <li>işler: {{ db.counts.get('jobs') }}</li>
        </ul>
      {% endif %}
      {% if db.error %}<div class="bad">{{ db.error }}</div>{% endif %}
    </div>
    <div class="card">
      <div>Redis: {% if redis.ok %}<span class="ok">TAMAM</span>{% else %}<span class="bad">KAPALI</span>{% endif %}</div>
      {% if redis.error %}<div class="bad">{{ redis.error }}</div>{% endif %}
    </div>
  </body>
  </html>


