<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Gelen Kutusu</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 24px; }
      .toolbar { display:flex; gap:8px; margin-bottom:12px; }
      .conv { border:1px solid #e5e7eb; border-radius:8px; padding:12px; margin-bottom:8px; }
      .meta { color:#6b7280; font-size:12px; }
      a { color:#2563eb; text-decoration:none; }
      button { background:#2563eb; color:#fff; border:none; border-radius:6px; padding:6px 10px; cursor:pointer; }
      .meta-link { font-size:12px; border:1px solid #2563eb; border-radius:6px; padding:2px 6px; margin-left:6px; }
    </style>
  </head>
  <body>
    {% include "_nav.html" %}
    <h1>{{ title or "Gelen Kutusu (Instagram + WhatsApp)" }}</h1>
    {% set escalation_map = escalation_map or {} %}
    <div class="toolbar">
      {% if not title or title == "Instagram Gelen Kutusu" %}
      <a href="/ig/inbox/ai-replied" class="meta-link" style="background:#10b981;color:#fff;border-color:#10b981;">AI Cevaplanan Mesajlar</a>
      <a href="/ig/inbox/ai-queue" class="meta-link" style="background:#f59e0b;color:#fff;border-color:#f59e0b;">AI KuyruÄŸu (Bekleyen)</a>
      {% else %}
      <a href="/ig/inbox" class="meta-link">TÃ¼m KonuÅŸmalar</a>
      {% endif %}
      <form method="get" action="/ig/inbox" style="display:flex;gap:8px;align-items:center;">
        <input type="text" name="q" placeholder="Mesajlarda ara..." value="{{ q or '' }}" style="padding:6px 8px;border:1px solid #e5e7eb;border-radius:6px;min-width:280px" />
        <select name="has_ad" style="padding:6px 8px;border:1px solid #e5e7eb;border-radius:6px;">
          <option value="" {% if not has_ad %}selected{% endif %}>TÃ¼m konuÅŸmalar</option>
          <option value="yes" {% if has_ad == 'yes' %}selected{% endif %}>ReklamlÄ± konuÅŸmalar</option>
          <option value="unlinked" {% if has_ad == 'unlinked' %}selected{% endif %}>ÃœrÃ¼ne baÄŸlanmamÄ±ÅŸ reklamlar</option>
        </select>
        <select name="ad_product" style="padding:6px 8px;border:1px solid #e5e7eb;border-radius:6px;min-width:220px;">
          <option value="" {% if not ad_product %}selected{% endif %}>TÃ¼m Ã¼rÃ¼nler</option>
          <option value="any" {% if ad_product == 'any' %}selected{% endif %}>ÃœrÃ¼n baÄŸlÄ± konuÅŸmalar</option>
          {% for prod in ad_product_options or [] %}
            <option value="{{ prod.id }}" {% if ad_product and (ad_product|string) == (prod.id|string) %}selected{% endif %}>{{ prod.name }}{% if prod.id %} Â· #{{ prod.id }}{% endif %}</option>
          {% endfor %}
        </select>
        <button type="submit">Ara</button>
        <a href="/ig/inbox" class="meta" style="margin-left:6px">Temizle</a>
      </form>
      <button id="refresh">Yenile</button>
      <button id="clearEnrich" style="background:#ef4444">Enrich KuyruÄŸunu Temizle</button>
      <button id="backfillAds" style="background:#10b981">ReklamlarÄ± Geri Doldur</button>
      <button id="backfillAiLatest" style="background:#0ea5e9">Son MesajlarÄ± Geri Doldur</button>
      <button id="backfillRawEvents" style="background:#8b5cf6" title="22 Ocak sonrasÄ± raw_events kayÄ±tlarÄ±nÄ± ingest kuyruÄŸuna ekler (worker kapalÄ±yken gelen webhook'lar)">Ä°ÅŸlenmemiÅŸ Webhook'larÄ± KuyruÄŸa Al</button>
      <button id="clearIngestBacklog" style="background:#dc2626;color:#fff" title="Bekleyen tÃ¼m ingest iÅŸlerini siler; sadece bundan sonra gelen mesajlar iÅŸlenir">Eski Ingest KuyruÄŸunu Temizle</button>
      <button id="exhaustOldAiPending" style="background:#b45309;color:#fff" title="30 dakikadan eski AI cevap kuyruÄŸundaki konuÅŸmalarÄ± verilmiÅŸ sayar; worker yeni mesajlara odaklanÄ±r">Eski AI KuyruÄŸunu VerilmiÅŸ Yap (30 dk)</button>
      <button id="mergeGraph" style="background:#6366f1">Graph CID'e BirleÅŸtir</button>
      <button id="normalizeDm" style="background:#22c55e">dm:&lt;id&gt; Normalize</button>
      <button id="resetIg" style="background:#ef4444">IG Verilerini SÄ±fÄ±rla</button>
      <form method="post" action="/ig/admin/backfill/ai_latest" style="display:inline;">
        <button type="submit" class="meta" style="background:#fff;color:#2563eb;border:1px solid #2563eb;">(Form ile gÃ¶nder)</button>
      </form>
      <button id="enrichUsersErrors" style="background:#f59e0b">HatalÄ± KullanÄ±cÄ±larÄ± Enrich Et</button>
      <form method="post" action="/ig/admin/enrich/users-errors" style="display:inline;">
        <button type="submit" class="meta" style="background:#fff;color:#2563eb;border:1px solid #2563eb;">(Form ile gÃ¶nder)</button>
      </form>
    </div>
    {% if admin_messages %}
    <div style="margin-bottom: 16px; border: 2px solid #f59e0b; border-radius: 8px; padding: 12px; background: #fffbeb;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
        <h3 style="margin: 0; color: #92400e; font-size: 16px;">
          ğŸ“¢ <a href="/ig/inbox/admin-messages" style="color: #92400e; text-decoration: none;">Admin MesajlarÄ±</a> 
          <span style="background: #ef4444; color: #fff; padding: 2px 8px; border-radius: 12px; font-size: 12px; margin-left: 8px;">{{ admin_messages|length }}</span>
        </h3>
        <a href="/ig/inbox/admin-messages" style="font-size: 12px; color: #2563eb; text-decoration: none;">TÃ¼mÃ¼nÃ¼ GÃ¶r â†’</a>
      </div>
      {% for msg in admin_messages[:3] %}
        <div style="border: 1px solid #fbbf24; border-radius: 6px; padding: 8px; margin-bottom: 6px; background: #fff; {% if msg.message_type == 'urgent' %}border-color: #ef4444; background: #fef2f2;{% elif msg.message_type == 'warning' %}border-color: #f59e0b; background: #fffbeb;{% endif %}">
          <div style="display: flex; justify-content: space-between; align-items: start;">
            <div style="flex: 1; min-width: 0;">
              <div style="font-weight: 600; color: #111827; font-size: 13px; margin-bottom: 4px;">
                {% if msg.message_type == 'urgent' %}ğŸ”´{% elif msg.message_type == 'warning' %}âš ï¸{% else %}â„¹ï¸{% endif %}
                <a href="/ig/inbox/{{ msg.conversation_id }}" style="color: #2563eb; text-decoration: none; margin-left: 4px;">#{{ msg.conversation_id }}</a>
              </div>
              {% if msg.metadata and (msg.metadata.username or msg.metadata.name) %}
                <div style="font-size: 11px; color: #2563eb; font-weight: 600; margin-bottom: 2px;">
                  ğŸ‘¤ 
                  {% if msg.metadata.username %}@{{ msg.metadata.username }}{% endif %}
                  {% if msg.metadata.name and msg.metadata.username %} Â· {% elif msg.metadata.name %}{% endif %}
                  {% if msg.metadata.name %}{{ msg.metadata.name }}{% endif %}
                </div>
              {% endif %}
              <div style="color: #374151; font-size: 12px; white-space: pre-wrap; overflow: hidden; text-overflow: ellipsis; max-height: 40px;">{{ msg.message[:100] }}{% if msg.message|length > 100 %}...{% endif %}</div>
            </div>
            <button onclick="markAdminMessageRead({{ msg.id }})" style="background: #10b981; color: #fff; border: none; border-radius: 4px; padding: 4px 8px; cursor: pointer; font-size: 11px; margin-left: 8px; white-space: nowrap;">Okundu</button>
          </div>
        </div>
      {% endfor %}
      {% if admin_messages|length > 3 %}
        <div style="text-align: center; margin-top: 8px;">
          <a href="/ig/inbox/admin-messages" style="font-size: 12px; color: #2563eb; text-decoration: none;">+{{ admin_messages|length - 3 }} mesaj daha â†’</a>
        </div>
      {% endif %}
    </div>
    {% endif %}
    <div id="list">
      {% for m in conversations %}
        <div class="conv">
          <div>
            <a href="/ig/inbox/{{ m.conversation_id }}">
              {% set platform = (m.platform or 'instagram') %}
              {% if platform == 'whatsapp' %}ğŸŸ¢ WA{% else %}ğŸ“¸ IG{% endif %} Â·
              {% if names and names.get(m.conversation_id) %}
                {{ names.get(m.conversation_id) }} {% if labels and labels.get(m.conversation_id) %}Â· {{ labels.get(m.conversation_id) }}{% endif %}
              {% else %}
                {{ labels.get(m.conversation_id) or m.conversation_id }}
              {% endif %}
            </a>
            {% if platform == 'instagram' and labels and labels.get(m.conversation_id) %}
              <a class="meta" target="_blank" rel="noopener" href="https://instagram.com/{{ labels.get(m.conversation_id)[1:] }}">profil â†—</a>
            {% endif %}
            <a class="meta-link" href="/ig/inbox/{{ m.conversation_id }}/debug" title="AI Hata AyÄ±klama">AI Hata AyÄ±klama</a>
            {% if ad_map.get(m.conversation_id) %}
              {% set ad = ad_map.get(m.conversation_id) %}
              {% if ad.link %}
                <a class="meta" target="_blank" rel="noopener" href="{{ ad.link }}">Â· Ad</a>
              {% else %}
                <span class="meta">Â· Ad</span>
              {% endif %}
              {% if ad.title %}
                <span class="meta"> â€” {{ (ad.title or '')[:60] }}</span>
              {% endif %}
              {% if ad.product_name %}
                <span class="meta"> Â· ÃœrÃ¼n: {{ ad.product_name }}</span>
                {% if ad.id %}
                  <a class="meta-link" href="/ads/{{ ad.id }}/edit" title="ÃœrÃ¼n baÄŸlantÄ±sÄ±nÄ± dÃ¼zenle">DÃ¼zenle</a>
                {% endif %}
              {% elif ad.id %}
                <a class="meta-link" href="/ads/{{ ad.id }}/edit" title="ReklamÄ± Ã¼rÃ¼ne baÄŸla">ReklamÄ± BaÄŸla</a>
              {% endif %}
            {% endif %}
            {% if escalation_map and escalation_map.get(m.conversation_id) %}
              {% set esc = escalation_map.get(m.conversation_id) %}
              <div class="meta" style="color:#b91c1c; margin-top:4px;">
                âš ï¸ YÃ¶netici Eskalasyonu: {{ (esc.message or '')[:100] }}{% if esc.message and esc.message|length > 100 %}...{% endif %}
              </div>
            {% endif %}
          </div>
          <div class="meta"><span class="ts" data-ts="{{ m.timestamp_ms or '' }}">{{ m.timestamp_ms }}</span> Â· {{ 'WhatsApp' if platform == 'whatsapp' else 'Instagram' }} Â· {{ (m.text or '')[:120] }}</div>
        </div>
      {% endfor %}
      {% if not conversations %}
        <div class="meta">HenÃ¼z Ã¶nbelleÄŸe alÄ±nmÄ±ÅŸ konuÅŸma yok. Senkron iÃ§in Yenileâ€™ye tÄ±klayÄ±n.</div>
      {% endif %}
    </div>
    <script>
      const btn = document.getElementById('refresh');
      btn?.addEventListener('click', async () => {
        btn.disabled = true; btn.textContent = 'Yenileniyor...';
        try {
          const r = await fetch('/ig/inbox/refresh', { method: 'POST' });
          if (!r.ok) throw new Error('yenileme baÅŸarÄ±sÄ±z');
          const js = await r.json();
          if (js.status !== 'ok') console.warn('Yenileme hatasÄ±', js);
          location.reload();
        } catch (e) { alert('Yenileme hatasÄ±'); }
      });
      const clearBtn = document.getElementById('clearEnrich');
      clearBtn?.addEventListener('click', async () => {
        if (!confirm('Enrich kuyruklarÄ±nÄ± temizlemek istediÄŸinize emin misiniz?')) return;
        clearBtn.disabled = true; const prev = clearBtn.textContent; clearBtn.textContent = 'Temizleniyor...';
        try {
          const r = await fetch('/ig/inbox/clear-enrich', { method: 'POST' });
          if (!r.ok) throw new Error('temizleme baÅŸarÄ±sÄ±z');
          const js = await r.json();
          alert('Temizlendi: ' + JSON.stringify(js.cleared || {}));
        } catch (e) { alert('Temizleme hatasÄ±'); }
        finally { clearBtn.disabled = false; clearBtn.textContent = prev; }
      });
      const backfillBtn = document.getElementById('backfillAds');
      backfillBtn?.addEventListener('click', async () => {
        if (!confirm('Mesajlardan reklamlarÄ± geri doldurmak ister misiniz?')) return;
        backfillBtn.disabled = true; const prev = backfillBtn.textContent; backfillBtn.textContent = 'Geri dolduruluyor...';
        try {
          const r = await fetch('/ig/admin/backfill/ads', { method: 'POST' });
          const js = await r.json().catch(()=>({}));
          if (!r.ok || js.status !== 'ok') throw new Error(JSON.stringify(js||{}));
          alert('Reklam geri doldurma tamamlandÄ±.\nOluÅŸturulan: ' + (js.created||0) + '\nGÃ¼ncellenen: ' + (js.updated||0));
          location.reload();
        } catch (e) { alert('Geri doldurma hatasÄ±'); }
        finally { backfillBtn.disabled = false; backfillBtn.textContent = prev; }
      });
      const backfillLatestBtn = document.getElementById('backfillAiLatest');
      backfillLatestBtn?.addEventListener('click', async () => {
        if (!confirm('Son mesaj Ã¶zetlerini (ai_conversations) geri doldurmak ister misiniz?')) return;
        backfillLatestBtn.disabled = true; const prev = backfillLatestBtn.textContent; backfillLatestBtn.textContent = 'Geri dolduruluyor...';
        try {
          const r = await fetch('/ig/admin/backfill/ai_latest', { method: 'POST' });
          const js = await r.json().catch(()=>({}));
          if (!r.ok || js.status !== 'ok') throw new Error(JSON.stringify(js||{}));
          alert('Geri doldurma tamamlandÄ±.\nGÃ¼ncellenen: ' + (js.updated||0) + '\nÄ°ÅŸlenen: ' + (js.considered||0));
          location.reload();
        } catch (e) { alert('Geri doldurma hatasÄ±'); }
        finally { backfillLatestBtn.disabled = false; backfillLatestBtn.textContent = prev; }
      });
      const backfillRawEventsBtn = document.getElementById('backfillRawEvents');
      backfillRawEventsBtn?.addEventListener('click', async () => {
        if (!confirm('22 Ocak 2025 sonrasÄ± alÄ±nmÄ±ÅŸ webhook kayÄ±tlarÄ±nÄ± (raw_events) ingest kuyruÄŸuna ekleyeceÄŸiz. Inbox worker iÅŸledikÃ§e mesajlar gÃ¶rÃ¼necek. Devam?')) return;
        backfillRawEventsBtn.disabled = true; const prev = backfillRawEventsBtn.textContent; backfillRawEventsBtn.textContent = 'KuyruÄŸa ekleniyor...';
        try {
          const r = await fetch('/ig/admin/backfill/raw_events?since=2025-01-22&limit=50000', { method: 'POST' });
          const js = await r.json().catch(()=>({}));
          if (js.status === 'error') throw new Error(js.error || 'Hata');
          alert('KuyruÄŸa eklendi: ' + (js.enqueued||0) + ' iÅŸ.\nIngest worker iÅŸledikÃ§e inbox gÃ¼ncellenecek.');
          location.reload();
        } catch (e) { alert('Raw events backfill hatasÄ±: ' + e.message); }
        finally { backfillRawEventsBtn.disabled = false; backfillRawEventsBtn.textContent = prev; }
      });
      const clearIngestBacklogBtn = document.getElementById('clearIngestBacklog');
      clearIngestBacklogBtn?.addEventListener('click', async () => {
        if (!confirm('Bekleyen tÃ¼m ingest iÅŸleri silinecek. GeÃ§miÅŸ mesajlar iÅŸlenmeyecek; sadece bundan sonra gelen yeni webhook\'lar iÅŸlenecek. Emin misiniz?')) return;
        clearIngestBacklogBtn.disabled = true; const prev = clearIngestBacklogBtn.textContent; clearIngestBacklogBtn.textContent = 'Temizleniyor...';
        try {
          const r = await fetch('/ig/admin/ingest/clear_backlog', { method: 'POST' });
          const js = await r.json().catch(()=>({}));
          if (js.status === 'error') throw new Error(js.error || 'Hata');
          alert('Ingest kuyruÄŸu temizlendi.\nRedis: ' + (js.redis_removed||0) + '\nJobs silinen: ' + (js.jobs_deleted||0));
          location.reload();
        } catch (e) { alert('Temizleme hatasÄ±: ' + e.message); }
        finally { clearIngestBacklogBtn.disabled = false; clearIngestBacklogBtn.textContent = prev; }
      });
      const exhaustOldAiBtn = document.getElementById('exhaustOldAiPending');
      exhaustOldAiBtn?.addEventListener('click', async () => {
        if (!confirm('30 dakikadan eski, cevap bekleyen (SÄ±rada) AI kuyruÄŸundaki konuÅŸmalar "verilmiÅŸ" sayÄ±lacak; worker sadece yeni mesajlara bakacak. Devam?')) return;
        exhaustOldAiBtn.disabled = true; const prev = exhaustOldAiBtn.textContent; exhaustOldAiBtn.textContent = 'Ä°ÅŸleniyor...';
        try {
          const r = await fetch('/ig/admin/ai_reply/exhaust_old_pending?minutes=30', { method: 'POST' });
          const js = await r.json().catch(()=>({}));
          if (js.status === 'error') throw new Error(js.error || 'Hata');
          alert('Eski AI kuyruÄŸu gÃ¼ncellendi.\nVerilmiÅŸ sayÄ±lan: ' + (js.exhausted||0) + ' konuÅŸma.');
          location.reload();
        } catch (e) { alert('Hata: ' + e.message); }
        finally { exhaustOldAiBtn.disabled = false; exhaustOldAiBtn.textContent = prev; }
      });
      const enrichUsersBtn = document.getElementById('enrichUsersErrors');
      enrichUsersBtn?.addEventListener('click', async () => {
        if (!confirm('fetch_status=error olan tÃ¼m kullanÄ±cÄ±larÄ± enrich kuyruÄŸuna eklemek ister misiniz?')) return;
        enrichUsersBtn.disabled = true; const prev = enrichUsersBtn.textContent; enrichUsersBtn.textContent = 'KuyruÄŸa ekleniyor...';
        try {
          const r = await fetch('/ig/admin/enrich/users-errors', { method: 'POST' });
          const js = await r.json().catch(()=>({}));
          if (!r.ok || js.status !== 'ok') throw new Error(JSON.stringify(js||{}));
          alert('KuyruÄŸa eklendi: ' + (js.enqueued||0));
        } catch (e) { alert('Enrich hatasÄ±'); }
        finally { enrichUsersBtn.disabled = false; enrichUsersBtn.textContent = prev; }
      });
      const mergeBtn = document.getElementById('mergeGraph');
      mergeBtn?.addEventListener('click', async () => {
        if (!confirm('TÃ¼m uygun dm:<id> konuÅŸmalar Graph CID\'e taÅŸÄ±nsÄ±n mÄ±?')) return;
        mergeBtn.disabled = true; const prev = mergeBtn.textContent; mergeBtn.textContent = 'BirleÅŸtiriliyor...';
        try {
          const r = await fetch('/ig/admin/merge_to_graph_conversation_ids', { method: 'POST' });
          const js = await r.json().catch(()=>({}));
          if (!r.ok || js.status !== 'ok') throw new Error(JSON.stringify(js||{}));
          alert('BirleÅŸtirme tamamlandÄ±.\nÄ°ncelenen: ' + (js.considered||0) + '\nTaÅŸÄ±nan: ' + (js.migrated||0));
          location.reload();
        } catch (e) { alert('BirleÅŸtirme hatasÄ±'); }
        finally { mergeBtn.disabled = false; mergeBtn.textContent = prev; }
      });
      const normalizeBtn = document.getElementById('normalizeDm');
      normalizeBtn?.addEventListener('click', async () => {
        if (!confirm('Eski mesajlarda dm:<id> conversation_id normalize edilsin mi?')) return;
        normalizeBtn.disabled = true; const prev = normalizeBtn.textContent; normalizeBtn.textContent = 'Normalize ediliyor...';
        try {
          const r = await fetch('/ig/admin/normalize_dm_conversation_ids', { method: 'POST' });
          const js = await r.json().catch(()=>({}));
          if (!r.ok || js.status !== 'ok') throw new Error(JSON.stringify(js||{}));
          alert('Normalize tamamlandÄ±.\nÄ°ncelenen: ' + (js.considered||0) + '\nDÃ¼zeltilen: ' + (js.normalized||0));
          location.reload();
        } catch (e) { alert('Normalize hatasÄ±'); }
        finally { normalizeBtn.disabled = false; normalizeBtn.textContent = prev; }
      });
      const resetBtn = document.getElementById('resetIg');
      resetBtn?.addEventListener('click', async () => {
        if (!confirm('UYARI: Bu iÅŸlem IG mesajlarÄ±, kullanÄ±cÄ±larÄ± ve IG AI verilerini SÄ°LER. Devam edilsin mi?')) return;
        resetBtn.disabled = true; const prev = resetBtn.textContent; resetBtn.textContent = 'SÄ±fÄ±rlanÄ±yor...';
        try {
          const r = await fetch('/ig/admin/reset/instagram', { method: 'POST' });
          const js = await r.json().catch(()=>({}));
          if (!r.ok || js.status !== 'ok') throw new Error(JSON.stringify(js||{}));
          alert('SÄ±fÄ±rlandÄ±: ' + JSON.stringify(js.cleared || {}));
          location.reload();
        } catch (e) { alert('SÄ±fÄ±rlama hatasÄ±'); }
        finally { resetBtn.disabled = false; resetBtn.textContent = prev; }
      });

      function fmtTs(){
        const nodes = document.querySelectorAll('.ts');
        for(const el of nodes){
          const v = el.getAttribute('data-ts');
          const ms = Number(v||0);
          if(ms>0){ const d = new Date(ms); el.textContent = d.toLocaleString(); }
          else { el.textContent = '-'; }
        }
      }
      fmtTs();

      // Live updates via WebSocket
      let wsConnected = false;
      const startWS = () => {
        try {
          const proto = location.protocol === 'https:' ? 'wss' : 'ws';
          const ws = new WebSocket(`${proto}://${location.host}/ig/ws`);
          ws.onopen = () => { wsConnected = true; };
          ws.onclose = () => { wsConnected = false; };
          ws.onerror = () => { wsConnected = false; };
          ws.onmessage = (ev) => {
            try {
              const data = JSON.parse(ev.data);
              if (data && data.type === 'ig_message') {
                location.reload();
              }
            } catch {}
          };
        } catch { wsConnected = false; }
      };
      startWS();
      
      // Admin mesajlarÄ±nÄ± okundu olarak iÅŸaretle
      async function markAdminMessageRead(msgId) {
        try {
          const r = await fetch(`/ig/inbox/admin/messages/${msgId}/read`, { method: 'POST' });
          if (!r.ok) throw new Error('okundu iÅŸaretleme baÅŸarÄ±sÄ±z');
          const js = await r.json();
          if (js.status === 'ok') {
            location.reload();
          } else {
            alert('Hata: ' + (js.error || 'Bilinmeyen hata'));
          }
        } catch (e) {
          alert('Okundu iÅŸaretleme hatasÄ±: ' + e.message);
        }
      }
      window.markAdminMessageRead = markAdminMessageRead;
      
      // Poll fallback every 15s if sockets fail
      setInterval(async () => {
        if (wsConnected) return;
        try { await fetch('/ig/inbox/refresh', { method: 'POST' }); location.reload(); } catch {}
      }, 15000);
    </script>
  </body>
</html>

